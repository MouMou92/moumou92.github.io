<section class="news">
  <h2>Nos dernières actualités</h2>
  <div class="cards" id="news-cards"></div>
  <div style="text-align:center; margin-top:20px;">
    <a href="content/actualites/actualites.html" class="btn">Voir toutes les actualités</a>
  </div>
</section>

<script>
async function loadNews(limit = 3) {
  try {
    const req = await fetch("content/actualites/news.json?_=" + Date.now());
    const jsonData = await req.json();
    const newsList = jsonData.items;

    // Trier par date décroissante
    newsList.sort((a, b) => new Date(b.date) - new Date(a.date));

    const latest = newsList.slice(0, limit);
    const container = document.getElementById("news-cards");
    container.innerHTML = "";

    latest.forEach(news => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${news.image}" alt="${news.title}">
        <h3>${news.title}</h3>
        <p>${news.excerpt}</p>
        <a href="content/actualites/actualites.html" class="btn">Lire</a>
      `;
      container.appendChild(card);
    });
  } catch (error) {
    console.error("Erreur lors du chargement des actualités :", error);
  }
}

loadNews();
</script>
