<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Accueil - ASBL Awal Novembre</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
  <style>html{scroll-behavior:smooth;}</style>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header>
    <div class="container">
      <div class="logo-wrap">
        <img class="logo" src="assets/images/logo.png" alt="ASBL Awal Novembre">
      </div>
      <div class="menu-toggle" id="menu-toggle">☰</div>
      <nav id="nav-menu">
        <ul>
          <li><a href="index.html" class="active">Accueil</a></li>
          <li><a href="about.html">À propos</a></li>
          <li><a href="actions.html">Actions</a></li>
          <li><a href="rejoindre.html">Rejoindre</a></li>
          <li><a href="content/actualites/actualites.html">Actualités</a></li>
          <li><a href="gallery.html">Galerie</a></li>
          <li><a href="donate.html">Faire un don</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- ===== SECTION HERO ===== -->
  <section class="hero">
    <div class="hero-content">
      <h1>ASBL Awal Novembre</h1>
    </div>
  </section>

  <!-- ===== SECTION INTRO ===== -->
  <section class="intro">
    <div class="container">
      <h2>Notre engagement</h2>
      <p>Awal Novembre agit chaque jour pour faire vivre les valeurs de solidarité, de fraternité et d’unité
      au sein de la communauté algérienne du Hainaut. Ensemble, nous œuvrons pour une société plus juste,
      bienveillante et fraternelle.</p>
    </div>
  </section>

  <!-- ===== BLOCS THEMATIQUES ===== -->
  <section class="themes">
    <div class="container cards">
      <div class="card">
        <h3>Notre Mission</h3>
        <p>Soutenir les familles, renforcer les liens entre générations et promouvoir les valeurs d’entraide
        et de fraternité dans le Hainaut.</p>
      </div>
      <div class="card">
        <h3>Nos Valeurs</h3>
        <p>Fraternité, Solidarité, Respect, Bienveillance et Transmission. Ces piliers guident
        chaque action menée par l’association.</p>
      </div>
      <div class="card">
        <h3>Nos Actions</h3>
        <p>Aide sociale et administrative, accompagnement des étudiants, visites solidaires,
        et organisation d’activités culturelles et éducatives.</p>
      </div>
    </div>
  </section>

  <!-- ===== ACTUALITES ===== -->
  <section class="news">
    <div class="container">
      <h2>Nos dernières actualités</h2>
      <div class="cards" id="news-cards"></div>
      <div class="center">
        <a href="content/actualites/actualites.html" class="btn">Voir toutes les actualités</a>
      </div>
    </div>
  </section>

  <!-- ===== FOOTER ===== -->
  <footer>
    <p>&copy; 2025 ASBL Awal Novembre — Tous droits réservés.</p>
    <p><a href="contact.html">Nous contacter</a></p>
  </footer>

  <!-- ===== SCRIPTS ===== -->
<script>
/* Utilitaire: slug sans accents */
function slugify(text) {
  return text.toString()
    .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
    .replace(/[^a-zA-Z0-9\s-]/g, "")
    .trim().toLowerCase().replace(/\s+/g, "-");
}

/* Charge et rend les 3 dernières actus */
async function loadNews(limit = 3) {
  const container = document.getElementById("news-cards");
  try {
    // Résout correctement l’URL, que le site soit à la racine ou dans un sous-dossier
    const newsURL = new URL("content/actualites/news.json", document.baseURI);
    newsURL.searchParams.set("_", Date.now()); // anti-cache

    console.log("Chargement actus depuis:", newsURL.href);
    const res = await fetch(newsURL.href);
    if (!res.ok) throw new Error("HTTP " + res.status);
    const data = await res.json();
    const list = (data && Array.isArray(data.items)) ? data.items : [];
    if (!list.length) {
      container.innerHTML = '<p class="muted">Aucune actualité pour le moment.</p>';
      return;
    }

    // tri + rendu
    list.sort((a, b) => new Date(b.date) - new Date(a.date));
    const latest = list.slice(0, limit);
    container.innerHTML = "";

    latest.forEach(news => {
      const id = slugify(news.title || "");
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${news.image}" alt="${news.title || ""}">
        <h3>${news.title || ""}</h3>
        <p>${news.excerpt || ""}</p>
        <a href="content/actualites/actualites.html#${id}" class="btn">Lire</a>
      `;
      container.appendChild(card);
    });

    // Uniformise la hauteur des cartes après rendu + chargement images
    const normalizeHeights = () => {
      const cards = [...container.querySelectorAll(".card")];
      if (!cards.length) return;
      cards.forEach(c => c.style.height = "");
      const max = Math.max(...cards.map(c => c.offsetHeight));
      cards.forEach(c => c.style.height = max + "px");
    };
    normalizeHeights();
    window.addEventListener("load", normalizeHeights);
    window.addEventListener("resize", normalizeHeights);
  } catch (err) {
    console.error("Erreur actus index:", err);
    container.innerHTML = '<p class="muted">Impossible de charger les actualités.</p>';
  }
}

// Appel direct (pas de DOMContentLoaded, on est en bas de page)
loadNews();
</script>




  <script src="assets/js/script.js"></script>
</body>
</html>